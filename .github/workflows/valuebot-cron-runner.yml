name: ValueBot queue runner

on:
  schedule:
    - cron: "*/5 * * * *"
  workflow_dispatch:

jobs:
  run-valuebot-cron-worker:
    runs-on: ubuntu-latest
    env:
      VALUEBOT_CRON_SECRET: ${{ secrets.VALUEBOT_CRON_SECRET }}
    steps:
      - name: Call ValueBot cron worker
        run: |
          set -euo pipefail
          RESPONSE=$(curl -sS --fail -X POST "https://alphastocks.ai/api/valuebot-cron-worker?source=cron&secret=${VALUEBOT_CRON_SECRET}")
          echo "Response: $RESPONSE"

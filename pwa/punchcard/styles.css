:root{
  /* portal x monopoly hybrid */
  --bg: #0b0f1a;
  --bg-2: #0f1526;
  --panel: #121a2c;
  --panel-2:#17213a;
  --muted:#7d8aa9;
  --text:#eaf0ff;
  --acc:#2ad1ff;
  --acc-2:#65ff9c;
  --danger:#ff5c7a;
  --gold:#ffd166;

  --tile:#1a2440;
  --tile-border:#2a365a;

  --radius:14px;
  --radius-sm:10px;
  --shadow:0 8px 24px rgba(0,0,0,.35);

  --card-w: 280px;
  --card-h: 180px;
}

/* Reset & base */
* { box-sizing: border-box; }
html,body { height:100%; }
body{
  margin:0; color:var(--text);
  background:radial-gradient(1200px 800px at 50% 0%, #0b1224 0%, var(--bg) 50%, #070b13 100%);
  font: 15px/1.45 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji;
}
.app{ display:flex; flex-direction:column; min-height:100dvh; }

/* Header */
.app-bar{
  height:56px; padding:0 14px; display:flex; align-items:center; justify-content:space-between;
  backdrop-filter:saturate(120%) blur(10px);
  background:linear-gradient(180deg, rgba(10,14,26,.8), rgba(10,14,26,.45));
  border-bottom:1px solid rgba(255,255,255,.06);
}
.brand{ display:flex; gap:10px; align-items:center; letter-spacing:.4px; }
.brand .dot{ width:9px; height:9px; border-radius:50%; background:var(--acc); box-shadow:0 0 16px var(--acc); }
.app-actions{ display:flex; gap:8px; }

.btn{
  appearance:none; border:none; border-radius:999px; padding:10px 14px; font-weight:600; color:#0a0f19;
  background: linear-gradient(180deg, var(--acc), #1fbff0);
  box-shadow:0 6px 18px rgba(32,198,255,.35), inset 0 1px 0 rgba(255,255,255,.45);
  cursor:pointer; transition:transform .06s ease, filter .2s ease;
}
.btn:hover{ filter:saturate(110%); transform:translateY(-1px); }
.btn:active{ transform:translateY(0); }
.btn.primary{ background:linear-gradient(180deg, var(--acc-2), #2fd67e); box-shadow:0 6px 18px rgba(60,255,166,.28), inset 0 1px 0 rgba(255,255,255,.45); }
.btn.ghost{ background:transparent; color:var(--text); border:1px solid rgba(255,255,255,.16); }
.btn.side{ background: linear-gradient(180deg, #c1d5ff, #92b7ff); color:#0a0f19; }
.btn.danger{ background: linear-gradient(180deg, #ff8ca2, #ff5c7a); color:#0a0f19; }
.icon-btn{ background:transparent; color:var(--text); border:1px solid rgba(255,255,255,.16); border-radius:999px; padding:6px 10px; cursor:pointer; }

.badge-src{
  display:inline-block; font-size:12px; color:#cfe0ff; border:1px solid rgba(255,255,255,.16);
  padding:4px 8px; border-radius:999px; margin-right:8px; opacity:.85;
}

/* Board layout */
.board-wrap{ flex:1; display:grid; place-items:center; padding:10px; }
.board{
  position:relative; width:min(1600px, 98vw); height:min(98vh - 70px, 1000px);
  background: radial-gradient(900px 700px at 50% 45%, #0d1730, #0a0f19 65%);
  border-radius:var(--radius); box-shadow:var(--shadow), inset 0 0 0 1px rgba(255,255,255,.04);
  overflow:hidden;
}

/* Streets */
.street{ position:absolute; display:flex; gap:8px; padding:10px; z-index:5; }
.street-top{ top:0; left:0; right:0; height:calc(var(--card-h) + 28px); justify-content:center; align-items:flex-end; }
.street-right{ top:0; right:0; bottom:0; width:calc(var(--card-w) + 28px); flex-direction:column; justify-content:center; align-items:flex-start; }
.street-bottom{ left:0; right:0; bottom:0; height:calc(var(--card-h) + 28px); justify-content:center; align-items:flex-start; }
.street-left{ top:0; left:0; bottom:0; width:calc(var(--card-w) + 28px); flex-direction:column; justify-content:center; align-items:flex-end; }

/* Center zone */
.center-zone{
  position:absolute; inset:calc(var(--card-h) + 28px) calc(var(--card-w) + 28px);
  display:grid; grid-template-columns: 1.4fr .9fr; gap:16px; padding:16px;
}

/* Legend */
.quadrant-legend{
  position:absolute; top:12px; left:12px; display:flex; gap:12px; z-index:10; font-size:13px; color:#cfe0ff;
}
.key{ display:inline-block; width:10px; height:10px; border-radius:50%; margin-right:6px; vertical-align:-1px; }
.key.quality{ background:#65ff9c; box-shadow:0 0 8px #65ff9c; }
.key.value{ background:#ffd166; box-shadow:0 0 8px #ffd166; }
.key.momentum{ background:#2ad1ff; box-shadow:0 0 8px #2ad1ff; }
.key.avoid{ background:#ff5c7a; box-shadow:0 0 8px #ff5c7a; }

/* Universe canvas wrapper */
.universe-card{
  background:linear-gradient(180deg, var(--panel), var(--panel-2));
  border:1px solid rgba(255,255,255,.06);
  border-radius:var(--radius); box-shadow:var(--shadow);
  position:relative; padding:12px 12px 18px 12px; display:flex; flex-direction:column; gap:8px;
}
.universe-card header{ display:flex; align-items:baseline; justify-content:space-between; }
.universe-card h2{ margin:0; font-size:16px; }
.universe-card .hint{ color:var(--muted); font-size:12px; }
#universeCanvas{
  width:100%; height:420px; border-radius:var(--radius-sm);
  background:conic-gradient(from 45deg, rgba(101,255,156,.06) 0 25%, rgba(42,209,255,.06) 25% 50%, rgba(255,92,122,.06) 50% 75%, rgba(255,209,102,.06) 75% 100%),
             linear-gradient(180deg, #0e1730, #0a1020);
  border:1px solid rgba(255,255,255,.04);
}
.axes-label{ position:absolute; color:#a9b6d6; font-size:12px; opacity:.9; }
.axes-x{ left:50%; transform:translateX(-50%); bottom:10px; }
.axes-y{ top:50%; transform:translateY(-50%) rotate(-90deg); left:10px; }

/* Investment card */
.invest-card{
  background:linear-gradient(180deg, var(--panel), var(--panel-2));
  border:1px solid rgba(255,255,255,.06);
  border-radius:var(--radius); box-shadow:var(--shadow);
  padding:12px; display:flex; flex-direction:column; gap:12px;
}
.invest-card header{ display:flex; align-items:baseline; justify-content:space-between; }
.invest-card h2{ margin:0; font-size:16px; }
.stack-count{ color:var(--muted); font-size:12px; }

/* Flip card */
.flip-card{ perspective:1000px; width:var(--card-w); height:var(--card-h); margin:0 auto; }
.flip-card-inner{ width:100%; height:100%; position:relative; transition:transform .6s; transform-style:preserve-3d; }
.flip-card.flipped .flip-card-inner{ transform:rotateY(180deg); }

.flip-card-front, .flip-card-back{
  position:absolute; inset:0; border-radius:12px; padding:12px;
  display:flex; flex-direction:column; gap:10px; backface-visibility:hidden;
  background: radial-gradient(600px 400px at 30% 10%, #1a2440, #121a2c);
  border:1px solid rgba(255,255,255,.08);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 6px 18px rgba(0,0,0,.35);
}
.flip-card-back{ transform:rotateY(180deg); }
.card-title{ font-weight:800; letter-spacing:.3px; }
.card-sub{ color:var(--muted); margin-top:-6px; }

.card-kpis, .stats{ list-style:none; padding:0; margin:0; display:grid; grid-template-columns:1fr 1fr; gap:8px; }
.card-kpis li, .stats li{
  background:linear-gradient(180deg, #18213a, #141d33);
  border:1px solid rgba(255,255,255,.06);
  padding:8px 10px; border-radius:10px; display:flex; align-items:center; justify-content:space-between;
}
.card-kpis span{ color:#a9b6d6; }

/* Tiles (placed cards) */
.tile{
  width:var(--card-w); height:var(--card-h);
  background:linear-gradient(180deg, #141d33, #10182b);
  border:1px solid var(--tile-border); border-radius:12px;
  display:flex; align-items:center; justify-content:center;
  color:#cfe0ff; font-weight:700; position:relative; cursor:pointer;
  box-shadow:var(--shadow), inset 0 1px 0 rgba(255,255,255,.04);
  transition:transform .08s ease, outline .2s ease;
}
.tile:hover{ transform:translateY(-2px); outline:1px solid rgba(101,255,156,.35); }
.tile .badge{
  position:absolute; top:6px; right:6px; background:#0f1526; border:1px solid rgba(255,255,255,.12);
  padding:2px 8px; border-radius:999px; font-size:12px; color:#9fabc9;
}

/* Modal */
.modal{ border:none; padding:0; max-width:min(720px, 92vw); width:100%; background:transparent; }
.modal::backdrop{ backdrop-filter:blur(8px); background:rgba(0,0,0,.45); }
.modal-body{
  background:linear-gradient(180deg, var(--panel), var(--panel-2));
  border:1px solid rgba(255,255,255,.08); border-radius:16px; box-shadow:var(--shadow);
  padding:12px; color:var(--text);
}
.modal-header{ display:flex; align-items:center; justify-content:space-between; }
.modal-footer{ display:flex; gap:8px; justify-content:flex-end; }
.modal-flip{ width:100%; height:240px; }

/* Responsive */
@media (max-width: 1100px){
  :root{ --card-w: 240px; --card-h:160px; }
  .center-zone{ grid-template-columns: 1fr; }
  #universeCanvas{ height:320px; }
}
@media (max-width: 680px){
  :root{ --card-w: 200px; --card-h:138px; }
  .street-top, .street-bottom{ gap:6px; }
}
